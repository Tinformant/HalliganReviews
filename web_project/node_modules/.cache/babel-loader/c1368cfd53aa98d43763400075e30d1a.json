{"ast":null,"code":"/*\n * Ben Postlethwaite\n * January 2013\n * License MIT\n */\n'use strict';\n\nvar colorScale = require('./colorScale');\n\nvar lerp = require('lerp');\n\nmodule.exports = createColormap;\n\nfunction createColormap(spec) {\n  /*\n   * Default Options\n   */\n  var indicies, fromrgba, torgba, nsteps, cmap, colormap, format, nshades, colors, alpha, i;\n  if (!spec) spec = {};\n  nshades = (spec.nshades || 72) - 1;\n  format = spec.format || 'hex';\n  colormap = spec.colormap;\n  if (!colormap) colormap = 'jet';\n\n  if (typeof colormap === 'string') {\n    colormap = colormap.toLowerCase();\n\n    if (!colorScale[colormap]) {\n      throw Error(colormap + ' not a supported colorscale');\n    }\n\n    cmap = colorScale[colormap];\n  } else if (Array.isArray(colormap)) {\n    cmap = colormap.slice();\n  } else {\n    throw Error('unsupported colormap option', colormap);\n  }\n\n  if (cmap.length > nshades + 1) {\n    throw new Error(colormap + ' map requires nshades to be at least size ' + cmap.length);\n  }\n\n  if (!Array.isArray(spec.alpha)) {\n    if (typeof spec.alpha === 'number') {\n      alpha = [spec.alpha, spec.alpha];\n    } else {\n      alpha = [1, 1];\n    }\n  } else if (spec.alpha.length !== 2) {\n    alpha = [1, 1];\n  } else {\n    alpha = spec.alpha.slice();\n  } // map index points from 0..1 to 0..n-1\n\n\n  indicies = cmap.map(function (c) {\n    return Math.round(c.index * nshades);\n  }); // Add alpha channel to the map\n\n  alpha[0] = Math.min(Math.max(alpha[0], 0), 1);\n  alpha[1] = Math.min(Math.max(alpha[1], 0), 1);\n  var steps = cmap.map(function (c, i) {\n    var index = cmap[i].index;\n    var rgba = cmap[i].rgb.slice(); // if user supplies their own map use it\n\n    if (rgba.length === 4 && rgba[3] >= 0 && rgba[3] <= 1) {\n      return rgba;\n    }\n\n    rgba[3] = alpha[0] + (alpha[1] - alpha[0]) * index;\n    return rgba;\n  });\n  /*\n   * map increasing linear values between indicies to\n   * linear steps in colorvalues\n   */\n\n  var colors = [];\n\n  for (i = 0; i < indicies.length - 1; ++i) {\n    nsteps = indicies[i + 1] - indicies[i];\n    fromrgba = steps[i];\n    torgba = steps[i + 1];\n\n    for (var j = 0; j < nsteps; j++) {\n      var amt = j / nsteps;\n      colors.push([Math.round(lerp(fromrgba[0], torgba[0], amt)), Math.round(lerp(fromrgba[1], torgba[1], amt)), Math.round(lerp(fromrgba[2], torgba[2], amt)), lerp(fromrgba[3], torgba[3], amt)]);\n    }\n  } //add 1 step as last value\n\n\n  colors.push(cmap[cmap.length - 1].rgb.concat(alpha[1]));\n  if (format === 'hex') colors = colors.map(rgb2hex);else if (format === 'rgbaString') colors = colors.map(rgbaStr);else if (format === 'float') colors = colors.map(rgb2float);\n  return colors;\n}\n\n;\n\nfunction rgb2float(rgba) {\n  return [rgba[0] / 255, rgba[1] / 255, rgba[2] / 255, rgba[3]];\n}\n\nfunction rgb2hex(rgba) {\n  var dig,\n      hex = '#';\n\n  for (var i = 0; i < 3; ++i) {\n    dig = rgba[i];\n    dig = dig.toString(16);\n    hex += ('00' + dig).substr(dig.length);\n  }\n\n  return hex;\n}\n\nfunction rgbaStr(rgba) {\n  return 'rgba(' + rgba.join(',') + ')';\n}","map":{"version":3,"sources":["/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/node_modules/colormap/index.js"],"names":["colorScale","require","lerp","module","exports","createColormap","spec","indicies","fromrgba","torgba","nsteps","cmap","colormap","format","nshades","colors","alpha","i","toLowerCase","Error","Array","isArray","slice","length","map","c","Math","round","index","min","max","steps","rgba","rgb","j","amt","push","concat","rgb2hex","rgbaStr","rgb2float","dig","hex","toString","substr","join"],"mappings":"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","sourcesContent":["/*\n * Ben Postlethwaite\n * January 2013\n * License MIT\n */\n'use strict';\n\nvar colorScale = require('./colorScale');\nvar lerp = require('lerp')\n\nmodule.exports = createColormap;\n\nfunction createColormap (spec) {\n    /*\n     * Default Options\n     */\n    var indicies, fromrgba, torgba,\n        nsteps, cmap, colormap, format,\n        nshades, colors, alpha, i;\n\n    if ( !spec ) spec = {};\n\n    nshades = (spec.nshades || 72) - 1;\n    format = spec.format || 'hex';\n\n    colormap = spec.colormap;\n    if (!colormap) colormap = 'jet';\n\n    if (typeof colormap === 'string') {\n        colormap = colormap.toLowerCase();\n\n        if (!colorScale[colormap]) {\n            throw Error(colormap + ' not a supported colorscale');\n        }\n\n        cmap = colorScale[colormap];\n\n    } else if (Array.isArray(colormap)) {\n        cmap = colormap.slice();\n\n    } else {\n        throw Error('unsupported colormap option', colormap);\n    }\n\n    if (cmap.length > nshades + 1) {\n        throw new Error(\n            colormap+' map requires nshades to be at least size '+cmap.length\n        );\n    }\n\n    if (!Array.isArray(spec.alpha)) {\n\n        if (typeof spec.alpha === 'number') {\n            alpha = [spec.alpha, spec.alpha];\n\n        } else {\n            alpha = [1, 1];\n        }\n\n    } else if (spec.alpha.length !== 2) {\n        alpha = [1, 1];\n\n    } else {\n        alpha = spec.alpha.slice();\n    }\n\n    // map index points from 0..1 to 0..n-1\n    indicies = cmap.map(function(c) {\n        return Math.round(c.index * nshades);\n    });\n\n    // Add alpha channel to the map\n    alpha[0] = Math.min(Math.max(alpha[0], 0), 1);\n    alpha[1] = Math.min(Math.max(alpha[1], 0), 1);\n\n    var steps = cmap.map(function(c, i) {\n        var index = cmap[i].index\n\n        var rgba = cmap[i].rgb.slice();\n\n        // if user supplies their own map use it\n        if (rgba.length === 4 && rgba[3] >= 0 && rgba[3] <= 1) {\n            return rgba\n        }\n        rgba[3] = alpha[0] + (alpha[1] - alpha[0])*index;\n\n        return rgba\n    })\n\n\n    /*\n     * map increasing linear values between indicies to\n     * linear steps in colorvalues\n     */\n    var colors = []\n    for (i = 0; i < indicies.length-1; ++i) {\n        nsteps = indicies[i+1] - indicies[i];\n        fromrgba = steps[i];\n        torgba = steps[i+1];\n\n        for (var j = 0; j < nsteps; j++) {\n            var amt = j / nsteps\n            colors.push([\n                Math.round(lerp(fromrgba[0], torgba[0], amt)),\n                Math.round(lerp(fromrgba[1], torgba[1], amt)),\n                Math.round(lerp(fromrgba[2], torgba[2], amt)),\n                lerp(fromrgba[3], torgba[3], amt)\n            ])\n        }\n    }\n\n    //add 1 step as last value\n    colors.push(cmap[cmap.length - 1].rgb.concat(alpha[1]))\n\n    if (format === 'hex') colors = colors.map( rgb2hex );\n    else if (format === 'rgbaString') colors = colors.map( rgbaStr );\n    else if (format === 'float') colors = colors.map( rgb2float );\n\n    return colors;\n};\n\nfunction rgb2float (rgba) {\n    return [\n        rgba[0] / 255,\n        rgba[1] / 255,\n        rgba[2] / 255,\n        rgba[3]\n    ]\n}\n\nfunction rgb2hex (rgba) {\n    var dig, hex = '#';\n    for (var i = 0; i < 3; ++i) {\n        dig = rgba[i];\n        dig = dig.toString(16);\n        hex += ('00' + dig).substr( dig.length );\n    }\n    return hex;\n}\n\nfunction rgbaStr (rgba) {\n    return 'rgba(' + rgba.join(',') + ')';\n}\n"]},"metadata":{},"sourceType":"script"}