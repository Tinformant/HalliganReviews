{"ast":null,"code":"'use strict';\n\nmodule.exports = createBackgroundCube;\n\nvar createBuffer = require('gl-buffer');\n\nvar createVAO = require('gl-vao');\n\nvar createShader = require('./shaders').bg;\n\nfunction BackgroundCube(gl, buffer, vao, shader) {\n  this.gl = gl;\n  this.buffer = buffer;\n  this.vao = vao;\n  this.shader = shader;\n}\n\nvar proto = BackgroundCube.prototype;\n\nproto.draw = function (model, view, projection, bounds, enable, colors) {\n  var needsBG = false;\n\n  for (var i = 0; i < 3; ++i) {\n    needsBG = needsBG || enable[i];\n  }\n\n  if (!needsBG) {\n    return;\n  }\n\n  var gl = this.gl;\n  gl.enable(gl.POLYGON_OFFSET_FILL);\n  gl.polygonOffset(1, 2);\n  this.shader.bind();\n  this.shader.uniforms = {\n    model: model,\n    view: view,\n    projection: projection,\n    bounds: bounds,\n    enable: enable,\n    colors: colors\n  };\n  this.vao.bind();\n  this.vao.draw(this.gl.TRIANGLES, 36);\n  this.vao.unbind();\n  gl.disable(gl.POLYGON_OFFSET_FILL);\n};\n\nproto.dispose = function () {\n  this.vao.dispose();\n  this.buffer.dispose();\n  this.shader.dispose();\n};\n\nfunction createBackgroundCube(gl) {\n  //Create cube vertices\n  var vertices = [];\n  var indices = [];\n  var ptr = 0;\n\n  for (var d = 0; d < 3; ++d) {\n    var u = (d + 1) % 3;\n    var v = (d + 2) % 3;\n    var x = [0, 0, 0];\n    var c = [0, 0, 0];\n\n    for (var s = -1; s <= 1; s += 2) {\n      indices.push(ptr, ptr + 2, ptr + 1, ptr + 1, ptr + 2, ptr + 3);\n      x[d] = s;\n      c[d] = s;\n\n      for (var i = -1; i <= 1; i += 2) {\n        x[u] = i;\n\n        for (var j = -1; j <= 1; j += 2) {\n          x[v] = j;\n          vertices.push(x[0], x[1], x[2], c[0], c[1], c[2]);\n          ptr += 1;\n        }\n      } //Swap u and v\n\n\n      var tt = u;\n      u = v;\n      v = tt;\n    }\n  } //Allocate buffer and vertex array\n\n\n  var buffer = createBuffer(gl, new Float32Array(vertices));\n  var elements = createBuffer(gl, new Uint16Array(indices), gl.ELEMENT_ARRAY_BUFFER);\n  var vao = createVAO(gl, [{\n    buffer: buffer,\n    type: gl.FLOAT,\n    size: 3,\n    offset: 0,\n    stride: 24\n  }, {\n    buffer: buffer,\n    type: gl.FLOAT,\n    size: 3,\n    offset: 12,\n    stride: 24\n  }], elements); //Create shader object\n\n  var shader = createShader(gl);\n  shader.attributes.position.location = 0;\n  shader.attributes.normal.location = 1;\n  return new BackgroundCube(gl, buffer, vao, shader);\n}","map":{"version":3,"sources":["/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/node_modules/gl-axes3d/lib/background.js"],"names":["module","exports","createBackgroundCube","createBuffer","require","createVAO","createShader","bg","BackgroundCube","gl","buffer","vao","shader","proto","prototype","draw","model","view","projection","bounds","enable","colors","needsBG","i","POLYGON_OFFSET_FILL","polygonOffset","bind","uniforms","TRIANGLES","unbind","disable","dispose","vertices","indices","ptr","d","u","v","x","c","s","push","j","tt","Float32Array","elements","Uint16Array","ELEMENT_ARRAY_BUFFER","type","FLOAT","size","offset","stride","attributes","position","location","normal"],"mappings":"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","sourcesContent":["'use strict'\n\nmodule.exports = createBackgroundCube\n\nvar createBuffer = require('gl-buffer')\nvar createVAO    = require('gl-vao')\nvar createShader = require('./shaders').bg\n\nfunction BackgroundCube(gl, buffer, vao, shader) {\n  this.gl = gl\n  this.buffer = buffer\n  this.vao = vao\n  this.shader = shader\n}\n\nvar proto = BackgroundCube.prototype\n\nproto.draw = function(model, view, projection, bounds, enable, colors) {\n  var needsBG = false\n  for(var i=0; i<3; ++i) {\n    needsBG = needsBG || enable[i]\n  }\n  if(!needsBG) {\n    return\n  }\n\n  var gl = this.gl\n\n  gl.enable(gl.POLYGON_OFFSET_FILL)\n  gl.polygonOffset(1, 2)\n\n  this.shader.bind()\n  this.shader.uniforms = {\n    model: model,\n    view: view,\n    projection: projection,\n    bounds: bounds,\n    enable: enable,\n    colors: colors\n  }\n  this.vao.bind()\n  this.vao.draw(this.gl.TRIANGLES, 36)\n  this.vao.unbind()\n\n  gl.disable(gl.POLYGON_OFFSET_FILL)\n}\n\nproto.dispose = function() {\n  this.vao.dispose()\n  this.buffer.dispose()\n  this.shader.dispose()\n}\n\nfunction createBackgroundCube(gl) {\n  //Create cube vertices\n  var vertices = []\n  var indices  = []\n  var ptr = 0\n  for(var d=0; d<3; ++d) {\n    var u = (d+1) % 3\n    var v = (d+2) % 3\n    var x = [0,0,0]\n    var c = [0,0,0]\n    for(var s=-1; s<=1; s+=2) {\n      indices.push(ptr,   ptr+2, ptr+1,\n                   ptr+1, ptr+2, ptr+3)\n      x[d] = s\n      c[d] = s\n      for(var i=-1; i<=1; i+=2) {\n        x[u] = i\n        for(var j=-1; j<=1; j+=2) {\n          x[v] = j\n          vertices.push(x[0], x[1], x[2],\n                        c[0], c[1], c[2])\n          ptr += 1\n        }\n      }\n      //Swap u and v\n      var tt = u\n      u = v\n      v = tt\n    }\n  }\n\n  //Allocate buffer and vertex array\n  var buffer = createBuffer(gl, new Float32Array(vertices))\n  var elements = createBuffer(gl, new Uint16Array(indices), gl.ELEMENT_ARRAY_BUFFER)\n  var vao = createVAO(gl, [\n      {\n        buffer: buffer,\n        type: gl.FLOAT,\n        size: 3,\n        offset: 0,\n        stride: 24\n      },\n      {\n        buffer: buffer,\n        type: gl.FLOAT,\n        size: 3,\n        offset: 12,\n        stride: 24\n      }\n    ], elements)\n\n  //Create shader object\n  var shader = createShader(gl)\n  shader.attributes.position.location = 0\n  shader.attributes.normal.location = 1\n\n  return new BackgroundCube(gl, buffer, vao, shader)\n}\n"]},"metadata":{},"sourceType":"script"}