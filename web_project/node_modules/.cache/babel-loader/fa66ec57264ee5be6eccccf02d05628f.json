{"ast":null,"code":"/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar d3 = require('d3');\n\nvar Lib = require('../../lib');\n\nmodule.exports = function plot(gd, plotinfo, cdOHLC, ohlcLayer) {\n  var ya = plotinfo.yaxis;\n  var xa = plotinfo.xaxis;\n  var posHasRangeBreaks = !!xa.rangebreaks;\n  Lib.makeTraceGroups(ohlcLayer, cdOHLC, 'trace ohlc').each(function (cd) {\n    var plotGroup = d3.select(this);\n    var cd0 = cd[0];\n    var t = cd0.t;\n    var trace = cd0.trace;\n\n    if (trace.visible !== true || t.empty) {\n      plotGroup.remove();\n      return;\n    }\n\n    var tickLen = t.tickLen;\n    var paths = plotGroup.selectAll('path').data(Lib.identity);\n    paths.enter().append('path');\n    paths.exit().remove();\n    paths.attr('d', function (d) {\n      if (d.empty) return 'M0,0Z';\n      var xo = xa.c2p(d.pos - tickLen, true);\n      var xc = xa.c2p(d.pos + tickLen, true);\n      var x = posHasRangeBreaks ? (xo + xc) / 2 : xa.c2p(d.pos, true);\n      var yo = ya.c2p(d.o, true);\n      var yh = ya.c2p(d.h, true);\n      var yl = ya.c2p(d.l, true);\n      var yc = ya.c2p(d.c, true);\n      return 'M' + xo + ',' + yo + 'H' + x + 'M' + x + ',' + yh + 'V' + yl + 'M' + xc + ',' + yc + 'H' + x;\n    });\n  });\n};","map":{"version":3,"sources":["/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/node_modules/plotly.js/src/traces/ohlc/plot.js"],"names":["d3","require","Lib","module","exports","plot","gd","plotinfo","cdOHLC","ohlcLayer","ya","yaxis","xa","xaxis","posHasRangeBreaks","rangebreaks","makeTraceGroups","each","cd","plotGroup","select","cd0","t","trace","visible","empty","remove","tickLen","paths","selectAll","data","identity","enter","append","exit","attr","d","xo","c2p","pos","xc","x","yo","o","yh","h","yl","l","yc","c"],"mappings":"AAAA;;;;;;;AAQA;;AAEA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AAEA,IAAIC,GAAG,GAAGD,OAAO,CAAC,WAAD,CAAjB;;AAEAE,MAAM,CAACC,OAAP,GAAiB,SAASC,IAAT,CAAcC,EAAd,EAAkBC,QAAlB,EAA4BC,MAA5B,EAAoCC,SAApC,EAA+C;AAC5D,MAAIC,EAAE,GAAGH,QAAQ,CAACI,KAAlB;AACA,MAAIC,EAAE,GAAGL,QAAQ,CAACM,KAAlB;AACA,MAAIC,iBAAiB,GAAG,CAAC,CAACF,EAAE,CAACG,WAA7B;AAEAb,EAAAA,GAAG,CAACc,eAAJ,CAAoBP,SAApB,EAA+BD,MAA/B,EAAuC,YAAvC,EAAqDS,IAArD,CAA0D,UAASC,EAAT,EAAa;AACnE,QAAIC,SAAS,GAAGnB,EAAE,CAACoB,MAAH,CAAU,IAAV,CAAhB;AACA,QAAIC,GAAG,GAAGH,EAAE,CAAC,CAAD,CAAZ;AACA,QAAII,CAAC,GAAGD,GAAG,CAACC,CAAZ;AACA,QAAIC,KAAK,GAAGF,GAAG,CAACE,KAAhB;;AAEA,QAAGA,KAAK,CAACC,OAAN,KAAkB,IAAlB,IAA0BF,CAAC,CAACG,KAA/B,EAAsC;AAClCN,MAAAA,SAAS,CAACO,MAAV;AACA;AACH;;AAED,QAAIC,OAAO,GAAGL,CAAC,CAACK,OAAhB;AAEA,QAAIC,KAAK,GAAGT,SAAS,CAACU,SAAV,CAAoB,MAApB,EAA4BC,IAA5B,CAAiC5B,GAAG,CAAC6B,QAArC,CAAZ;AAEAH,IAAAA,KAAK,CAACI,KAAN,GAAcC,MAAd,CAAqB,MAArB;AAEAL,IAAAA,KAAK,CAACM,IAAN,GAAaR,MAAb;AAEAE,IAAAA,KAAK,CAACO,IAAN,CAAW,GAAX,EAAgB,UAASC,CAAT,EAAY;AACxB,UAAGA,CAAC,CAACX,KAAL,EAAY,OAAO,OAAP;AAEZ,UAAIY,EAAE,GAAGzB,EAAE,CAAC0B,GAAH,CAAOF,CAAC,CAACG,GAAF,GAAQZ,OAAf,EAAwB,IAAxB,CAAT;AACA,UAAIa,EAAE,GAAG5B,EAAE,CAAC0B,GAAH,CAAOF,CAAC,CAACG,GAAF,GAAQZ,OAAf,EAAwB,IAAxB,CAAT;AACA,UAAIc,CAAC,GAAG3B,iBAAiB,GAAG,CAACuB,EAAE,GAAGG,EAAN,IAAY,CAAf,GAAmB5B,EAAE,CAAC0B,GAAH,CAAOF,CAAC,CAACG,GAAT,EAAc,IAAd,CAA5C;AAEA,UAAIG,EAAE,GAAGhC,EAAE,CAAC4B,GAAH,CAAOF,CAAC,CAACO,CAAT,EAAY,IAAZ,CAAT;AACA,UAAIC,EAAE,GAAGlC,EAAE,CAAC4B,GAAH,CAAOF,CAAC,CAACS,CAAT,EAAY,IAAZ,CAAT;AACA,UAAIC,EAAE,GAAGpC,EAAE,CAAC4B,GAAH,CAAOF,CAAC,CAACW,CAAT,EAAY,IAAZ,CAAT;AACA,UAAIC,EAAE,GAAGtC,EAAE,CAAC4B,GAAH,CAAOF,CAAC,CAACa,CAAT,EAAY,IAAZ,CAAT;AAEA,aAAO,MAAMZ,EAAN,GAAW,GAAX,GAAiBK,EAAjB,GAAsB,GAAtB,GAA4BD,CAA5B,GACH,GADG,GACGA,CADH,GACO,GADP,GACaG,EADb,GACkB,GADlB,GACwBE,EADxB,GAEH,GAFG,GAEGN,EAFH,GAEQ,GAFR,GAEcQ,EAFd,GAEmB,GAFnB,GAEyBP,CAFhC;AAGH,KAfD;AAgBH,GAnCD;AAoCH,CAzCD","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\n\nvar Lib = require('../../lib');\n\nmodule.exports = function plot(gd, plotinfo, cdOHLC, ohlcLayer) {\n    var ya = plotinfo.yaxis;\n    var xa = plotinfo.xaxis;\n    var posHasRangeBreaks = !!xa.rangebreaks;\n\n    Lib.makeTraceGroups(ohlcLayer, cdOHLC, 'trace ohlc').each(function(cd) {\n        var plotGroup = d3.select(this);\n        var cd0 = cd[0];\n        var t = cd0.t;\n        var trace = cd0.trace;\n\n        if(trace.visible !== true || t.empty) {\n            plotGroup.remove();\n            return;\n        }\n\n        var tickLen = t.tickLen;\n\n        var paths = plotGroup.selectAll('path').data(Lib.identity);\n\n        paths.enter().append('path');\n\n        paths.exit().remove();\n\n        paths.attr('d', function(d) {\n            if(d.empty) return 'M0,0Z';\n\n            var xo = xa.c2p(d.pos - tickLen, true);\n            var xc = xa.c2p(d.pos + tickLen, true);\n            var x = posHasRangeBreaks ? (xo + xc) / 2 : xa.c2p(d.pos, true);\n\n            var yo = ya.c2p(d.o, true);\n            var yh = ya.c2p(d.h, true);\n            var yl = ya.c2p(d.l, true);\n            var yc = ya.c2p(d.c, true);\n\n            return 'M' + xo + ',' + yo + 'H' + x +\n                'M' + x + ',' + yh + 'V' + yl +\n                'M' + xc + ',' + yc + 'H' + x;\n        });\n    });\n};\n"]},"metadata":{},"sourceType":"script"}