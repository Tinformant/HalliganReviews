{"ast":null,"code":"/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar setGroupPositions = require('../bar/cross_trace_calc').setGroupPositions;\n\nmodule.exports = function crossTraceCalc(gd, plotinfo) {\n  var fullLayout = gd._fullLayout;\n  var fullData = gd._fullData;\n  var calcdata = gd.calcdata;\n  var xa = plotinfo.xaxis;\n  var ya = plotinfo.yaxis;\n  var waterfalls = [];\n  var waterfallsVert = [];\n  var waterfallsHorz = [];\n  var cd, i;\n\n  for (i = 0; i < fullData.length; i++) {\n    var fullTrace = fullData[i];\n\n    if (fullTrace.visible === true && fullTrace.xaxis === xa._id && fullTrace.yaxis === ya._id && fullTrace.type === 'waterfall') {\n      cd = calcdata[i];\n\n      if (fullTrace.orientation === 'h') {\n        waterfallsHorz.push(cd);\n      } else {\n        waterfallsVert.push(cd);\n      }\n\n      waterfalls.push(cd);\n    }\n  }\n\n  var opts = {\n    mode: fullLayout.waterfallmode,\n    norm: fullLayout.waterfallnorm,\n    gap: fullLayout.waterfallgap,\n    groupgap: fullLayout.waterfallgroupgap\n  };\n  setGroupPositions(gd, xa, ya, waterfallsVert, opts);\n  setGroupPositions(gd, ya, xa, waterfallsHorz, opts);\n\n  for (i = 0; i < waterfalls.length; i++) {\n    cd = waterfalls[i];\n\n    for (var j = 0; j < cd.length; j++) {\n      var di = cd[j];\n\n      if (di.isSum === false) {\n        di.s0 += j === 0 ? 0 : cd[j - 1].s;\n      }\n\n      if (j + 1 < cd.length) {\n        cd[j].nextP0 = cd[j + 1].p0;\n        cd[j].nextS0 = cd[j + 1].s0;\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/node_modules/plotly.js/src/traces/waterfall/cross_trace_calc.js"],"names":["setGroupPositions","require","module","exports","crossTraceCalc","gd","plotinfo","fullLayout","_fullLayout","fullData","_fullData","calcdata","xa","xaxis","ya","yaxis","waterfalls","waterfallsVert","waterfallsHorz","cd","i","length","fullTrace","visible","_id","type","orientation","push","opts","mode","waterfallmode","norm","waterfallnorm","gap","waterfallgap","groupgap","waterfallgroupgap","j","di","isSum","s0","s","nextP0","p0","nextS0"],"mappings":"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","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar setGroupPositions = require('../bar/cross_trace_calc').setGroupPositions;\n\nmodule.exports = function crossTraceCalc(gd, plotinfo) {\n    var fullLayout = gd._fullLayout;\n    var fullData = gd._fullData;\n    var calcdata = gd.calcdata;\n    var xa = plotinfo.xaxis;\n    var ya = plotinfo.yaxis;\n    var waterfalls = [];\n    var waterfallsVert = [];\n    var waterfallsHorz = [];\n    var cd, i;\n\n    for(i = 0; i < fullData.length; i++) {\n        var fullTrace = fullData[i];\n\n        if(\n            fullTrace.visible === true &&\n            fullTrace.xaxis === xa._id &&\n            fullTrace.yaxis === ya._id &&\n            fullTrace.type === 'waterfall'\n        ) {\n            cd = calcdata[i];\n\n            if(fullTrace.orientation === 'h') {\n                waterfallsHorz.push(cd);\n            } else {\n                waterfallsVert.push(cd);\n            }\n\n            waterfalls.push(cd);\n        }\n    }\n\n    var opts = {\n        mode: fullLayout.waterfallmode,\n        norm: fullLayout.waterfallnorm,\n        gap: fullLayout.waterfallgap,\n        groupgap: fullLayout.waterfallgroupgap\n    };\n\n    setGroupPositions(gd, xa, ya, waterfallsVert, opts);\n    setGroupPositions(gd, ya, xa, waterfallsHorz, opts);\n\n    for(i = 0; i < waterfalls.length; i++) {\n        cd = waterfalls[i];\n\n        for(var j = 0; j < cd.length; j++) {\n            var di = cd[j];\n\n            if(di.isSum === false) {\n                di.s0 += (j === 0) ? 0 : cd[j - 1].s;\n            }\n\n            if(j + 1 < cd.length) {\n                cd[j].nextP0 = cd[j + 1].p0;\n                cd[j].nextS0 = cd[j + 1].s0;\n            }\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"script"}