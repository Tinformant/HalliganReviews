{"ast":null,"code":"'use strict';\n\nvar bn2num = require('./lib/bn-to-num');\n\nvar ctz = require('./lib/ctz');\n\nmodule.exports = roundRat; // Round a rational to the closest float\n\nfunction roundRat(f) {\n  var a = f[0];\n  var b = f[1];\n\n  if (a.cmpn(0) === 0) {\n    return 0;\n  }\n\n  var h = a.abs().divmod(b.abs());\n  var iv = h.div;\n  var x = bn2num(iv);\n  var ir = h.mod;\n  var sgn = a.negative !== b.negative ? -1 : 1;\n\n  if (ir.cmpn(0) === 0) {\n    return sgn * x;\n  }\n\n  if (x) {\n    var s = ctz(x) + 4;\n    var y = bn2num(ir.ushln(s).divRound(b));\n    return sgn * (x + y * Math.pow(2, -s));\n  } else {\n    var ybits = b.bitLength() - ir.bitLength() + 53;\n    var y = bn2num(ir.ushln(ybits).divRound(b));\n\n    if (ybits < 1023) {\n      return sgn * y * Math.pow(2, -ybits);\n    }\n\n    y *= Math.pow(2, -1023);\n    return sgn * y * Math.pow(2, 1023 - ybits);\n  }\n}","map":{"version":3,"sources":["/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/node_modules/big-rat/to-float.js"],"names":["bn2num","require","ctz","module","exports","roundRat","f","a","b","cmpn","h","abs","divmod","iv","div","x","ir","mod","sgn","negative","s","y","ushln","divRound","Math","pow","ybits","bitLength"],"mappings":"AAAA;;AAEA,IAAIA,MAAM,GAAGC,OAAO,CAAC,iBAAD,CAApB;;AACA,IAAIC,GAAG,GAAGD,OAAO,CAAC,WAAD,CAAjB;;AAEAE,MAAM,CAACC,OAAP,GAAiBC,QAAjB,C,CAEA;;AACA,SAASA,QAAT,CAAmBC,CAAnB,EAAsB;AACpB,MAAIC,CAAC,GAAGD,CAAC,CAAC,CAAD,CAAT;AACA,MAAIE,CAAC,GAAGF,CAAC,CAAC,CAAD,CAAT;;AACA,MAAIC,CAAC,CAACE,IAAF,CAAO,CAAP,MAAc,CAAlB,EAAqB;AACnB,WAAO,CAAP;AACD;;AACD,MAAIC,CAAC,GAAGH,CAAC,CAACI,GAAF,GAAQC,MAAR,CAAeJ,CAAC,CAACG,GAAF,EAAf,CAAR;AACA,MAAIE,EAAE,GAAGH,CAAC,CAACI,GAAX;AACA,MAAIC,CAAC,GAAGf,MAAM,CAACa,EAAD,CAAd;AACA,MAAIG,EAAE,GAAGN,CAAC,CAACO,GAAX;AACA,MAAIC,GAAG,GAAIX,CAAC,CAACY,QAAF,KAAeX,CAAC,CAACW,QAAlB,GAA8B,CAAC,CAA/B,GAAmC,CAA7C;;AACA,MAAIH,EAAE,CAACP,IAAH,CAAQ,CAAR,MAAe,CAAnB,EAAsB;AACpB,WAAOS,GAAG,GAAGH,CAAb;AACD;;AACD,MAAIA,CAAJ,EAAO;AACL,QAAIK,CAAC,GAAGlB,GAAG,CAACa,CAAD,CAAH,GAAS,CAAjB;AACA,QAAIM,CAAC,GAAGrB,MAAM,CAACgB,EAAE,CAACM,KAAH,CAASF,CAAT,EAAYG,QAAZ,CAAqBf,CAArB,CAAD,CAAd;AACA,WAAOU,GAAG,IAAIH,CAAC,GAAGM,CAAC,GAAGG,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,CAACL,CAAb,CAAZ,CAAV;AACD,GAJD,MAIO;AACL,QAAIM,KAAK,GAAGlB,CAAC,CAACmB,SAAF,KAAgBX,EAAE,CAACW,SAAH,EAAhB,GAAiC,EAA7C;AACA,QAAIN,CAAC,GAAGrB,MAAM,CAACgB,EAAE,CAACM,KAAH,CAASI,KAAT,EAAgBH,QAAhB,CAAyBf,CAAzB,CAAD,CAAd;;AACA,QAAIkB,KAAK,GAAG,IAAZ,EAAkB;AAChB,aAAOR,GAAG,GAAGG,CAAN,GAAUG,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,CAACC,KAAb,CAAjB;AACD;;AACDL,IAAAA,CAAC,IAAIG,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,CAAC,IAAb,CAAL;AACA,WAAOP,GAAG,GAAGG,CAAN,GAAUG,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,OAAOC,KAAnB,CAAjB;AACD;AACF","sourcesContent":["'use strict'\n\nvar bn2num = require('./lib/bn-to-num')\nvar ctz = require('./lib/ctz')\n\nmodule.exports = roundRat\n\n// Round a rational to the closest float\nfunction roundRat (f) {\n  var a = f[0]\n  var b = f[1]\n  if (a.cmpn(0) === 0) {\n    return 0\n  }\n  var h = a.abs().divmod(b.abs())\n  var iv = h.div\n  var x = bn2num(iv)\n  var ir = h.mod\n  var sgn = (a.negative !== b.negative) ? -1 : 1\n  if (ir.cmpn(0) === 0) {\n    return sgn * x\n  }\n  if (x) {\n    var s = ctz(x) + 4\n    var y = bn2num(ir.ushln(s).divRound(b))\n    return sgn * (x + y * Math.pow(2, -s))\n  } else {\n    var ybits = b.bitLength() - ir.bitLength() + 53\n    var y = bn2num(ir.ushln(ybits).divRound(b))\n    if (ybits < 1023) {\n      return sgn * y * Math.pow(2, -ybits)\n    }\n    y *= Math.pow(2, -1023)\n    return sgn * y * Math.pow(2, 1023 - ybits)\n  }\n}\n"]},"metadata":{},"sourceType":"script"}