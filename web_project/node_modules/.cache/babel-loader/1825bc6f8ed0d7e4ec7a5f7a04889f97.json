{"ast":null,"code":"/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Axes = require('../../plots/cartesian/axes');\n\nvar attributes = require('./attributes');\n\nvar fillText = require('../../lib').fillText;\n\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n  var cd = pointData.cd;\n  var trace = cd[0].trace;\n  var geo = pointData.subplot;\n  var pt, i, j, isInside;\n\n  for (i = 0; i < cd.length; i++) {\n    pt = cd[i];\n    isInside = false;\n\n    if (pt._polygons) {\n      for (j = 0; j < pt._polygons.length; j++) {\n        if (pt._polygons[j].contains([xval, yval])) {\n          isInside = !isInside;\n        } // for polygons that cross antimeridian as xval is in [-180, 180]\n\n\n        if (pt._polygons[j].contains([xval + 360, yval])) {\n          isInside = !isInside;\n        }\n      }\n\n      if (isInside) break;\n    }\n  }\n\n  if (!isInside || !pt) return;\n  pointData.x0 = pointData.x1 = pointData.xa.c2p(pt.ct);\n  pointData.y0 = pointData.y1 = pointData.ya.c2p(pt.ct);\n  pointData.index = pt.index;\n  pointData.location = pt.loc;\n  pointData.z = pt.z;\n  pointData.zLabel = Axes.tickText(geo.mockAxis, geo.mockAxis.c2l(pt.z), 'hover').text;\n  pointData.hovertemplate = pt.hovertemplate;\n  makeHoverInfo(pointData, trace, pt, geo.mockAxis);\n  return [pointData];\n};\n\nfunction makeHoverInfo(pointData, trace, pt) {\n  if (trace.hovertemplate) return;\n  var hoverinfo = pt.hi || trace.hoverinfo;\n  var loc = String(pt.loc);\n  var parts = hoverinfo === 'all' ? attributes.hoverinfo.flags : hoverinfo.split('+');\n  var hasName = parts.indexOf('name') !== -1;\n  var hasLocation = parts.indexOf('location') !== -1;\n  var hasZ = parts.indexOf('z') !== -1;\n  var hasText = parts.indexOf('text') !== -1;\n  var hasIdAsNameLabel = !hasName && hasLocation;\n  var text = [];\n\n  if (hasIdAsNameLabel) {\n    pointData.nameOverride = loc;\n  } else {\n    if (hasName) pointData.nameOverride = trace.name;\n    if (hasLocation) text.push(loc);\n  }\n\n  if (hasZ) {\n    text.push(pointData.zLabel);\n  }\n\n  if (hasText) {\n    fillText(pt, trace, text);\n  }\n\n  pointData.extraText = text.join('<br>');\n}","map":{"version":3,"sources":["/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/node_modules/plotly.js/src/traces/choropleth/hover.js"],"names":["Axes","require","attributes","fillText","module","exports","hoverPoints","pointData","xval","yval","cd","trace","geo","subplot","pt","i","j","isInside","length","_polygons","contains","x0","x1","xa","c2p","ct","y0","y1","ya","index","location","loc","z","zLabel","tickText","mockAxis","c2l","text","hovertemplate","makeHoverInfo","hoverinfo","hi","String","parts","flags","split","hasName","indexOf","hasLocation","hasZ","hasText","hasIdAsNameLabel","nameOverride","name","push","extraText","join"],"mappings":"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","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Axes = require('../../plots/cartesian/axes');\nvar attributes = require('./attributes');\nvar fillText = require('../../lib').fillText;\n\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n    var cd = pointData.cd;\n    var trace = cd[0].trace;\n    var geo = pointData.subplot;\n\n    var pt, i, j, isInside;\n\n    for(i = 0; i < cd.length; i++) {\n        pt = cd[i];\n        isInside = false;\n\n        if(pt._polygons) {\n            for(j = 0; j < pt._polygons.length; j++) {\n                if(pt._polygons[j].contains([xval, yval])) {\n                    isInside = !isInside;\n                }\n                // for polygons that cross antimeridian as xval is in [-180, 180]\n                if(pt._polygons[j].contains([xval + 360, yval])) {\n                    isInside = !isInside;\n                }\n            }\n\n            if(isInside) break;\n        }\n    }\n\n    if(!isInside || !pt) return;\n\n    pointData.x0 = pointData.x1 = pointData.xa.c2p(pt.ct);\n    pointData.y0 = pointData.y1 = pointData.ya.c2p(pt.ct);\n\n    pointData.index = pt.index;\n    pointData.location = pt.loc;\n    pointData.z = pt.z;\n    pointData.zLabel = Axes.tickText(geo.mockAxis, geo.mockAxis.c2l(pt.z), 'hover').text;\n    pointData.hovertemplate = pt.hovertemplate;\n\n    makeHoverInfo(pointData, trace, pt, geo.mockAxis);\n\n    return [pointData];\n};\n\nfunction makeHoverInfo(pointData, trace, pt) {\n    if(trace.hovertemplate) return;\n\n    var hoverinfo = pt.hi || trace.hoverinfo;\n    var loc = String(pt.loc);\n\n    var parts = (hoverinfo === 'all') ?\n        attributes.hoverinfo.flags :\n        hoverinfo.split('+');\n\n    var hasName = (parts.indexOf('name') !== -1);\n    var hasLocation = (parts.indexOf('location') !== -1);\n    var hasZ = (parts.indexOf('z') !== -1);\n    var hasText = (parts.indexOf('text') !== -1);\n    var hasIdAsNameLabel = !hasName && hasLocation;\n\n    var text = [];\n\n    if(hasIdAsNameLabel) {\n        pointData.nameOverride = loc;\n    } else {\n        if(hasName) pointData.nameOverride = trace.name;\n        if(hasLocation) text.push(loc);\n    }\n\n    if(hasZ) {\n        text.push(pointData.zLabel);\n    }\n    if(hasText) {\n        fillText(pt, trace, text);\n    }\n\n    pointData.extraText = text.join('<br>');\n}\n"]},"metadata":{},"sourceType":"script"}